



<ngx-spinner
  bdColor="rgba(0, 0, 0, 0.8)"
  size="medium"
  color="#fff"
  type="ball-scale-multiple"
  [fullScreen]="true"
>
  <p style="color: white">Loading...</p>
</ngx-spinner>
<div class="agent-page-main-content">
    <form [formGroup]="accesspointForm" (submit)="AddAccessPoint()">
    <div class="create-business-hour console-body-wrapper perfect-scrollbar">
        <div class="wider-container pt-5">

                <div class="floating-item mb-4">
                    <div [ngClass]="{'was-validated' : accesspointForm.get('Name')!.valid && accesspointForm.get('Name').touched}"
                     class="floating-wrap form-floating">
                        <input [ngClass]="{'is-invalid' : (accesspointForm.get('Name').errors && (accesspointForm.get('Name').touched ||
                        accesspointForm.get('Name').dirty))}" class="form-control" id="floatingInput" placeholder="Enter Name" formControlName="Name">
                        <label for="floatingInputValue">Name</label>
                        <div class="invalid-feedback" *ngIf="(accesspointForm.get('Name')!.errors && (accesspointForm.get('Name')!.touched ||
                                                                                              accesspointForm.get('Name')!.dirty))">
                            <div
                                *ngIf="accesspointForm.get('Name')!.errors?.['maxlength'] || accesspointForm.get('Name')!.errors?.['minlength']">
                                Access Point Name must be grater than 1 character and less than 25 character!
                            </div>
                            <div *ngIf="accesspointForm.get('Name')!.errors?.['required']">
                                Access Point Name is required!
                            </div>
                    
                        </div>
                        <div class="valid-feedback" *ngIf="accesspointForm.get('Name')!.valid && accesspointForm.get('Name')!.touched">
                    
                            Looks Good!
                        </div>
                    </div>
                </div>
                <div class="floating-item mb-4">
                    <div [ngClass]="{'was-validated' : accesspointForm.get('Alias')!.valid && accesspointForm.get('Alias').touched}"
                     class="floating-wrap form-floating">
                        <input [ngClass]="{'is-invalid' : (accesspointForm.get('Alias').errors && (accesspointForm.get('Alias').touched ||
                        accesspointForm.get('Alias').dirty))}" class="form-control" id="floatingInput" placeholder="Enter Alias" formControlName="Alias">
                        <label for="floatingInputValue">Alias</label>
                        <div class="invalid-feedback" *ngIf="(accesspointForm.get('Alias')!.errors && (accesspointForm.get('Alias')!.touched ||
                                                                                              accesspointForm.get('Alias')!.dirty))">
                            
                            <div *ngIf="accesspointForm.get('Alias')!.errors?.['required']">
                                Alias is required!
                            </div>
                    
                        </div>
                        <div class="valid-feedback" *ngIf="accesspointForm.get('Alias')!.valid && accesspointForm.get('Alias')!.touched">
                    
                            Looks Good!
                        </div>
                    </div>
                </div>

                <div  [ngClass]="{'was-validated' : accesspointForm.get('City_Id')!.valid && accesspointForm.get('City_Id').touched}"
                class="form-floating mb-4">

                    <select [ngClass]="{'is-invalid' : (accesspointForm.get('City_Id').errors && (accesspointForm.get('City_Id').touched ||
                    accesspointForm.get('City_Id').dirty))}" formControlName="City_Id" [(ngModel)]="city_Id" (ngModelChange)="getAllLocations()" class="form-select" id="floatingSelect" aria-label="Floating label select example">
                        <option value="">Select City</option>
                        <option *ngFor="let city of Cities" [value]="city.id">{{city.name}}</option>
                      </select>
                      <label for="floatingSelect">Select City</label>
                      <div class="invalid-feedback" *ngIf="(accesspointForm.get('City_Id')!.errors && (accesspointForm.get('City_Id')!.touched ||
                                                                                              accesspointForm.get('City_Id')!.dirty))">
                            
                            <div *ngIf="accesspointForm.get('City_Id')!.errors?.['required']">
                                Please select City!
                            </div>
                    
                        </div>
                        <div class="valid-feedback" *ngIf="accesspointForm.get('City_Id')!.valid && accesspointForm.get('City_Id')!.touched">
                    
                            Looks Good!
                        </div>

                </div>

                <div [ngClass]="{'was-validated' : accesspointForm.get('Location_Id')!.valid && accesspointForm.get('Location_Id').touched}"
                class="form-floating mb-4">
                    <select [ngClass]="{'is-invalid' : (accesspointForm.get('Location_Id').errors && (accesspointForm.get('Location_Id').touched ||
                    accesspointForm.get('Location_Id').dirty))}" [(ngModel)]="loc_Id" (ngModelChange)="getAllFloors()" class="form-select" id="floatingSelect" aria-label="Floating label select example" formControlName="Location_Id">
                        <option *ngFor="let location of locations" [value]="location.id">{{location.name}}</option>
                    </select>
                    <label for="floatingSelect">Select Locations</label>
                    <div class="invalid-feedback" *ngIf="(accesspointForm.get('Location_Id')!.errors && (accesspointForm.get('Location_Id')!.touched ||
                                                                                              accesspointForm.get('Location_Id')!.dirty))">
                            
                            <div *ngIf="accesspointForm.get('Location_Id')!.errors?.['required']">
                                Please select Location!
                            </div>
                    
                        </div>
                        <div class="valid-feedback" *ngIf="accesspointForm.get('Location_Id')!.valid && accesspointForm.get('Location_Id')!.touched">
                    
                            Looks Good!
                        </div>
                </div>
                <div [ngClass]="{'was-validated' : accesspointForm.get('Floor_Id')!.valid && accesspointForm.get('Floor_Id').touched}"
                 class="form-floating mb-4">
                    <select [ngClass]="{'is-invalid' : (accesspointForm.get('Floor_Id').errors && (accesspointForm.get('Floor_Id').touched ||
                    accesspointForm.get('Floor_Id').dirty))}" class="form-select" id="floatingSelect" aria-label="Floating label select example" formControlName="Floor_Id">
                        <option *ngFor="let floor of Floors" [value]="floor.floors.id">{{floor.floors.name}}</option>
                    </select>
                    <label for="floatingSelect">Select Floors</label>
                    <div class="invalid-feedback" *ngIf="(accesspointForm.get('Floor_Id')!.errors && (accesspointForm.get('Floor_Id')!.touched ||
                                                                                              accesspointForm.get('Floor_Id')!.dirty))">
                            
                            <div *ngIf="accesspointForm.get('Floor_Id')!.errors?.['required']">
                                Please select Floor!
                            </div>
                    
                        </div>
                        <div class="valid-feedback" *ngIf="accesspointForm.get('Floor_Id')!.valid && accesspointForm.get('Floor_Id')!.touched">
                    
                            Looks Good!
                        </div>
                </div>

                <div class="form-check mb-4">
                    <input class="form-check-input" type="checkbox" id="inout" checked>
                    <label class="form-check-label" for="inout">
                        Do you want to select IN/OUT Seperately
                    </label>
                </div>
                <div class="floating-item select-pills mb-4 bg-white">
                    <div class="form-floating">
                        <p>Select IN Devices</p>
                        <select formControlName="AccessPoint_Devices" id="INN" (ngModelChange)="getInVal($event)"  class="js-example-theme-multiple">
                            <option disabled [value]="">Select This</option> 
                            <option [selected]="device.Selected" *ngFor="let device of devices" [value]="device.id">{{device.name}}</option>
                        </select>
                    </div>
                    <!-- <div class="form-floating" [ngClass]="{'was-validated' : InDevicesControl.valid && InDevicesControl.touched}">
                        <p style="margin-bottom: 0px;"> Select IN Devices</p>
                    
                    
                        <mat-select [formControl]="InDevicesControl" multiple [ngClass]="{'is-invalid' : (InDevicesControl.errors && (InDevicesControl.touched ||
                                    InDevicesControl.dirty))}" formControlName="AccessPoint_Devices" id="INN" 
                                    (ngModelChange)="getInVal($event)" class="js-example-theme-multiple" style="margin: 5px;">
                    
                            <mat-select-trigger>
                                <mat-chip-list>
                                    <mat-chip *ngFor="let device of InDevicesControl.value" [removable]="true"
                                        (removed)="onCatRemovedInDevices(device)"
                                        style="background-color:#2F9DF2; color:#ffffff; border-radius: 5px!important;" selected>
                                        {{ device }}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                </mat-chip-list>
                            </mat-select-trigger>
                    
                            <mat-option *ngFor="let device of devices" [value]="device.name">
                    
                                {{device.name}}
                            </mat-option>
                        </mat-select>
                        <div class="invalid-feedback" *ngIf="(InDevicesControl.errors && (InDevicesControl.touched ||
                                   InDevicesControl.dirty))">
                            <div>
                                Please select atleast one Support Channel
                            </div>
                    
                    
                        </div>
                        <div class="valid-feedback" *ngIf=" InDevicesControl.valid && InDevicesControl.touched">
                    
                            Looks Good!
                        </div>
                    
                    </div> -->
                </div>


                <div class="floating-item select-pills mb-4 bg-white">
                    <div class="form-floating">
                        <p>Select OUT Devices</p>
                        <select  formControlName="AccessPoint_Devices" id="OUT" class="js-example-theme-multiple" (ngModelChange)="getOutVal($event)">
                            <option *ngFor="let device of devices" [value]="device.id"  >{{device.name}}</option>
                        </select>
                    </div>
                    <!-- <div class="form-floating" [ngClass]="{'was-validated' : OutDevicesControl.valid && OutDevicesControl.touched}">
                        <p style="margin-bottom: 0px;"> Select Out Devices</p>
                    
                    
                        <mat-select [formControl]="OutDevicesControl" multiple [ngClass]="{'is-invalid' : (OutDevicesControl.errors && (OutDevicesControl.touched ||
                                    OutDevicesControl.dirty))}" formControlName="AccessPoint_Devices" id="OUT" 
                                    (ngModelChange)="getInVal($event)" class="js-example-theme-multiple" style="margin: 5px;">
                    
                            <mat-select-trigger>
                                <mat-chip-list>
                                    <mat-chip *ngFor="let device of OutDevicesControl.value" [removable]="true"
                                        (removed)="onCatRemovedOutDevices(device)"
                                        style="background-color:#2F9DF2; color:#ffffff; border-radius: 5px!important;" selected>
                                        {{ device }}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                </mat-chip-list>
                            </mat-select-trigger>
                    
                            <mat-option *ngFor="let device of devices" [value]="device.name">
                    
                                {{device.name}}
                            </mat-option>
                        </mat-select>
                        <div class="invalid-feedback" *ngIf="(OutDevicesControl.errors && (OutDevicesControl.touched ||
                                   OutDevicesControl.dirty))">
                            <div>
                                Please select atleast one Support Channel
                            </div>
                    
                    
                        </div>
                        <div class="valid-feedback" *ngIf=" OutDevicesControl.valid && OutDevicesControl.touched">
                    
                            Looks Good!
                        </div>
                    
                    </div> -->
                </div>

            </div>
        </div>
        <footer class="footer">
            <div class="ps-3 pe-5">
                <div class="icon-buttons-wrapper d-flex justify-content-between pt-3 pb-4">
                    <div class="row w-100">
                        <div class="col-md-4">
                            
                            
                        </div>
                        <div class="col-md-8 justify-content-end d-flex">
                            <div class="buttons-wrap d-flex">
                                <button routerLink="/dashboard/listofaccesspoints" type="button" class="btn btn-outline-secondary btn-medium me-2 px-4"
                                data-bs-toggle="modal" data-bs-target="">Cancel </button>
                                <button type="button" class="btn btn-success ms-e f-saveBtn btn-large d-none"></button>
                                <!-- <button type="button" class="btn skyBg ms-2 px-4 btn-medium" data-bs-toggle="modal"
                                data-bs-target="">Save</button> -->
                                <button type="submit" class="btn skyBg ms-2 px-4 btn-medium" [disabled]="!accesspointForm.valid">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </form>
</div>